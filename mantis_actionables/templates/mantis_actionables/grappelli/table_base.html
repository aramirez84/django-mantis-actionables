{% extends "mantis_actionables/grappelli/base.html" %}
{% load staticfiles %}
{% block javascripts %}
    {{ block.super }}
    <script>
      var view_url = '{% url data_view_name %}'
      var initial_filter = '{{ initial_filter }}'
      var datatables_dom = '{{ datatables_dom }}'
    </script>
{% endblock javascripts %}

{% block content %}
    <div id="grp-content-container">
      <div class="l-2cr-responsive l-2cr-fluid">
        <div class="c-2">
              {% for table in tables %}
                      {% with table_name=table.table_name cols=table.cols %}
          <div class="grp-module">


            <div class="grp-row grp-cells">

                <div class="grp-cell result_box">
                  <h2 class="result_head clearfix"> {{ table_name }} <span class="res_num"></span></h2>
                  <table id="{{ table_name|lower }}" cellspacing="0" class="grp-sortable result_table" width="100%">
                    <thead>
                      <tr>
                      {% for col in cols.values %}
                      {% with col_name=col.1 searchable=col.2 %}
                        <th data-isearch="{{ searchable }}">{{ col_name }}</th>
                      {% endwith %}
                      {% endfor %}
                      </tr>
                    </thead>
                    {# TODO filter section still hardcoded, should be changed when decided how #}
                    <tfoot>
                      <!--tr>
                        {% block data %}
                          <td>
                              <select id="{{ table_name|lower }}_tlp_filter"></select>
                          </td>
                          <td></td>
                          {% if cols|length == 6 %}
                            <td><select id="{{ table_name|lower }}_type_filter"></select></td>
                          {% endif %}
                          <td></td>
                          <td><select id="{{ table_name|lower }}_ns_filter"></select></td>
                          <td></td>
                        {% endblock %}
                      </tr-->
                    </tfoot>
                  </table>

                </div>

              {% endwith %}
            </div>


                      <h3>                  {{ table.end_matter }}</h3>


          </div>
              {% endfor %}
        </div>
      </div>
    </div>
{% endblock %}
